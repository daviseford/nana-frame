(this["webpackJsonpnana-frame"]=this["webpackJsonpnana-frame"]||[]).push([[0],{131:function(e,t){},223:function(e,t,n){e.exports=n(854)},439:function(e,t,n){},834:function(e,t,n){},854:function(e,t,n){"use strict";n.r(t);n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(82),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(269),n(270),n(271),n(273),n(274),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(338),n(339),n(340),n(341),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),n(357),n(171),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(174),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(392),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(401),n(402),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(434),n(181);var a=n(2),r=n.n(a),c=n(216),o=n.n(c),u=(n(439),n(28)),s=n.n(u),i=n(49),l=n(60),m=n(221),f=n(16),d=n(222),p=n(78),E=n.n(p),v=n(59),b={API_ACCESS_KEY:"naZAkLj0JL0KWsYQecNJ",API_URL:"https://tn1rhuaas6.execute-api.us-east-1.amazonaws.com/dev",BUCKET_HREF:"https://nanaimages.s3.amazonaws.com/",BUCKET_PREFIX:"processed/",BUCKET:"nanaimages",COGNITO_IDENTITY:"us-east-1:3a445c96-1f34-4459-b18c-91f99b16cbf4",REGION:"us-east-1"};console.log("ENV",b);var h=b,C=h.BUCKET;E.a.config.region=h.REGION,E.a.config.credentials=new E.a.CognitoIdentityCredentials({IdentityPoolId:h.COGNITO_IDENTITY});var x=new E.a.S3({apiVersion:"2006-03-01",params:{Bucket:C}}),g=[],k=function(e){return e.map((function(e){return e.Contents})).filter((function(e){return!!e}))},y=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,a,r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.Prefix,a=t.NextContinuationToken,t.IsTruncated&&a){e.next=5;break}return r=k(g),g=[],e.abrupt("return",r);case 5:return e.prev=5,e.next=8,x.listObjectsV2({Prefix:n,Bucket:C,ContinuationToken:a,MaxKeys:1e3}).promise();case 8:if((c=e.sent)&&c.Contents){e.next=13;break}return o=k(g),g=[],e.abrupt("return",o);case 13:return g.push(c),e.abrupt("return",y(c));case 17:return e.prev=17,e.t0=e.catch(5),console.log(e.t0),e.abrupt("return",k(g));case 21:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(i.a)(s.a.mark((function e(){var t,n,a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=h.BUCKET_PREFIX,e.next=4,x.listObjectsV2({Prefix:t,Bucket:C,MaxKeys:1e3}).promise();case 4:return n=e.sent,e.next=7,y(n);case 7:if(a=e.sent,n.Contents){e.next=10;break}throw new Error("Missing data.Contents!");case 10:return r=[n.Contents].concat(Object(d.a)(a)).flat(),c=Object(v.sortBy)(r.map((function(e){return e?"".concat(h.BUCKET_HREF).concat(e.Key):""})).filter((function(e){return""!==e&&e!=="".concat(h.BUCKET_HREF).concat(t)}))).reverse(),e.abrupt("return",c);case 15:return e.prev=15,e.t0=e.catch(0),console.error("There was an error viewing your bucket: "+e.t0.message),e.abrupt("return",[]);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();var N=function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])},O=n(217),B=n.n(O),j=n(218),I=n.n(j),A=(n(834),["#B53BA0","#55C2C0","#51B899","#558AC2","#5495AB","#5168B8","#79D8F7","#C3EAF7","#5775DE","#F7CF60","#92DEF7","#828EFA","#545CAB","#252B5E","#F7F560","#C3C9F7","#7986F7","#C3C9F7","#2235AD","#1A7BAD","#324DFA","#341DC4","#1D60C4","#5C1CBA","#BD07B6","#2335AD","#671DC4","#1D91C4","#1CBA90"]),T=I()(B.a),F=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"def-error"},"No pictures found yet.",r.a.createElement("br",null),r.a.createElement("br",null),"We love you Nana!"))},K=function(e){var t=e.photos,n=Object(a.useState)([]),c=Object(l.a)(n,2),o=c[0],u=c[1];return Object(a.useEffect)((function(){(null===t||void 0===t?void 0:t.length)!==(null===o||void 0===o?void 0:o.length)&&(u(void 0),setTimeout((function(){return u(t)}),100))}),[t,o]),(null===o||void 0===o?void 0:o.length)?r.a.createElement("div",null,r.a.createElement(T,{play:!0,cancelOnInteraction:!1,interval:5e3,fillParent:!0,buttons:!1},o.map((function(e){return r.a.createElement("div",{"data-src":e,style:{backgroundColor:Object(v.sample)(A)},key:e})})))):r.a.createElement(F,null)},_=(n(835),n(219)),D=n.n(_),P=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={Bucket:h.BUCKET,Key:t,access_key:h.API_ACCESS_KEY},e.next=4,D.a.post("".concat(h.API_URL,"/delete_image"),n);case 4:a=e.sent,console.log(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),R=function(e){var t=e.url;return r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"card mb-4 shadow-sm"},r.a.createElement("img",{className:"card-img-top",width:"100%",src:t,alt:t}),r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-text"},t),r.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:function(){return P(t.replace(h.BUCKET_HREF,""))}},"Delete"))))))},U=function(e){var t=e.chunks,n=e.setIdx,a=e.idx;return r.a.createElement("p",null,t.map((function(e,t){return r.a.createElement("button",{type:"button",onClick:function(){return n(t)},className:"btn btn-".concat(a===t?"primary":"secondary"," my-2 mx-1"),key:t},t+1)})))},S=function(e){var t=e.urls,n=void 0===t?[]:t,c=Object(a.useState)(0),o=Object(l.a)(c,2),u=o[0],s=o[1],i=Object(a.useMemo)((function(){return Object(v.chunk)(n,20)}),[n]);return 0===i.length?r.a.createElement("div",null,"No images found."):(document.body.style.overflow="auto",r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"album py-3 bg-light"},r.a.createElement("section",{className:"jumbotron text-center"},r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Admin Panel"),r.a.createElement("p",null,n.length," images available."),r.a.createElement(U,{chunks:i,idx:u,setIdx:s}))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},i[u]&&i[u].map((function(e){return r.a.createElement(R,{url:e,key:e})}))),r.a.createElement("div",{className:"row text-center"},r.a.createElement("div",{className:"col"},r.a.createElement(U,{chunks:i,idx:u,setIdx:s})))))))},J=function(){var e=Object(a.useState)(void 0),t=Object(l.a)(e,2),n=t[0],c=t[1],o=1e3*1*60;return Object(a.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:(t=e.sent)&&c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),N((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:(t=e.sent)&&c(t),console.log("Just checked for updates. Next update in ".concat(1," minute").concat("","."));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),o),r.a.createElement(m.a,null,r.a.createElement(f.c,null,r.a.createElement(f.a,{path:"/admin"},r.a.createElement(S,{urls:n})),r.a.createElement(f.a,{path:"/"},r.a.createElement(K,{photos:n}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[223,1,2]]]);
//# sourceMappingURL=main.150fbbcd.chunk.js.map